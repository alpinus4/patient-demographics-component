<link rel="import" href="bower_components/polymer/polymer-element.html">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<dom-module id="patient-image">

  <template>

    <style>
      /* shadow DOM styles go here */
      :host {
        display: inline-block;
      }

    </style>


    <!-- shadow DOM goes here -->
    <img id='patientImage'>
    <input type='file' accept='image/*' id='imageUpload'><br>

  </template>

  <script>
    class PatientImage extends Polymer.Element {
      static get is() {
        return 'patient-image';
      }
      static get properties() {
        return {
          patientuuid: {
            type: String
          },
          targetImg: {
            type: Object
          }
        }
      }
      constructor() {
        super();
      }

      ready() {
        super.ready();
        this.targetImg = this.$.patientImage;
        this.$.imageUpload.addEventListener('change', this._openPatientImage);
      }


      _openPatientImage(event) {
        var input = event.target;

        var reader = new FileReader();
        reader.onload = function() {
          var dataURL = reader.result;
          this.targetImg.src = dataURL;
        };
        reader.readAsDataURL(input.files[0]);
      }

    }
    customElements.define(PatientImage.is, PatientImage);
  </script>


</dom-module>
